<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
  <head>
    <meta charset="UTF-8">
    <title th:text="#{arbitro.home.pageTitle}">Panel del Árbitro</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Estilos del proyecto -->
    <link rel="stylesheet" href="/css/globals.css">
    <link rel="stylesheet" href="/css/forms.css">
    <link rel="stylesheet" href="/css/arbitro.css">
    <link rel="stylesheet" href="/css/home.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">
  </head>

  <body>
    <!-- HEADER -->
    <div th:replace="fragments/header :: header"></div>

    <main class="container my-5">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="card p-4 shadow-sm rounded-3">
            <h2 class="mb-4 text-center" th:text="#{arbitro.home.h1}">
              Panel del Árbitro
            </h2>

            <!-- Mensaje i18n de ÉXITO -->
            <div
              th:if="${msgCode}"
              class="alert alert-success mb-3"
              th:text="${#messages.msg(msgCode)}">
            </div>

            <!-- Datos del árbitro -->
            <div class="datos-arbitro text-center">

              <!-- FOTO DEL ÁRBITRO -->
              <div class="mb-3 text-center">

                <!-- 1️⃣ Caso: el árbitro no ha puesto URL -->
                <img
                  th:if="${arbitro == null or arbitro.urlFoto == null or #strings.isEmpty(arbitro.urlFoto)}"
                  src="/images/default-avatar.png"
                  alt="Foto por defecto"
                  class="img-thumbnail shadow-sm"
                  style="width: 150px; height: 150px; object-fit: cover; border-radius: 50%;">

                <!-- 2️⃣ Caso: el árbitro puso una URL válida -->
                <!-- 3️⃣ Si la URL no existe, se muestra “url-no-encontrada.png” -->
                <img
                  th:if="${arbitro != null and arbitro.urlFoto != null and !#strings.isEmpty(arbitro.urlFoto)}"
                  th:src="${arbitro.urlFoto}"
                  alt="Foto del árbitro"
                  class="img-thumbnail shadow-sm"
                  style="width: 150px; height: 150px; object-fit: cover; border-radius: 50%;"
                  onerror="this.onerror=null; this.src='/images/url-no-encontrada.png';">
              </div>

              <!-- NOMBRE -->
              <h3
                class="nombre-arbitro"
                th:text="${arbitro != null ? (arbitro.nombre + ' ' + arbitro.apellido) : 'Nombre Apellido'}">
                Nombre Apellido
              </h3>

              <!-- CORREO -->
              <p>
                <strong th:text="#{arbitro.home.correo}">Correo:</strong>
                <span th:text="${arbitro != null ? arbitro.correo : 'correo@ejemplo.com'}">
                  correo@ejemplo.com
                </span>
              </p>

              <!-- ESPECIALIDAD -->
              <div th:if="${arbitro != null and not #strings.isEmpty(arbitro.especialidad)}">
                <p>
                  <strong th:text="#{arbitro.home.especialidad}">Especialidad:</strong>
                  <span th:text="${arbitro.especialidad}">CAMPO</span>
                </p>
              </div>

              <!-- ESCALAFÓN -->
              <div th:if="${arbitro != null and not #strings.isEmpty(arbitro.escalafon)}">
                <p>
                  <strong th:text="#{arbitro.home.escalafon}">Escalafón:</strong>
                  <span th:text="${arbitro.escalafon}">FIBA</span>
                </p>
              </div>
            </div>

            <!-- FECHAS DISPONIBLES -->
            <div class="fechas-panel mt-4 p-3 rounded-3 shadow-sm bg-light">
              <h4 class="text-success mb-3" th:text="#{arbitro.home.fechas.titulo}">
                Fechas disponibles
              </h4>

              <ul
                class="list-group lista-fechas-arbitro"
                th:if="${arbitro != null and arbitro.fechasDisponibles != null and !#lists.isEmpty(arbitro.fechasDisponibles)}"
                th:each="f : ${arbitro.fechasDisponibles}">
                <li
                  class="list-group-item rounded-pill mb-1 py-2"
                  th:text="${#temporals.format(f, 'dd/MM/yyyy')}">
                  2025-08-22
                </li>
              </ul>

              <p
                th:if="${arbitro == null or arbitro.fechasDisponibles == null or #lists.isEmpty(arbitro.fechasDisponibles)}"
                class="text-muted"
                th:text="#{arbitro.home.fechas.vacio}">
                Aún no has configurado tus fechas disponibles.
              </p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- FOOTER -->
    <div th:replace="fragments/footer :: footer"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
